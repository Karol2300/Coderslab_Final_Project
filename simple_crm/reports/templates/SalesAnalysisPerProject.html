{% extends 'show_data_base.html' %}
{% load static %}
{% block head %}
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/styles.css">

     {% block title %}<h1>  Simple CRM / Project {{ project }} sales analysis  </h1>   {% endblock %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </head>
    {% endblock %}

{% block action %}
     <br>
<table>
    <tbody>
             <th> Total apartments qty </th>
            <th> Total apartments area </th>
            <th> Total apartments value </th>
             <td> Total average apartments price\sqm</td>

            <tr>
                <td>{{ total_apartments_quantity }}</td>
                <td>{{ total_apartments_area }}</td>
                <td>{{ total_apartments_val }} PLN</td>
                <td>{{ average_total_price_per_sqm }} </td>
            </tr>
    </tbody>
        </table>

    <br>
    <table>
        <tbody>
        <th>Product id</th>
             <th>Area</th>
             <th>Floor</th>
             <th>Number of rooms</th>
             <th>Status</th>
             <th>Price</th>
             <th>Go to product details</th>
         {% for product in products_sold %}
            <tr>
                        <td> {{product.id}}</td> <td>{{product.area}}</td>
                        <td>{{product.floor}}</td><td>{{product.number_of_rooms}}</td><td> {{product.status}}</td>
                        <td> {{product.price}} PLN</td> <td> <a href="http://127.0.0.1:8000/showProduct/{{ product.id }}"> {{ product }}</a></td>
                    </tr>
                        {% endfor %}
                        <tr> <td>Sold apartments qty : {{ sold_apartments_quantity }}</td></tr>
                        <tr><td> Sold apartments share : {{ sold_products_share }} of qty</td></tr>
                        <tr><td> Sold apartments area : {{ sold_apartments_area }}</td></tr>
                        <tr><td> Sold apartments area share : {{ sold_apartments_area_share }} of total area</td></tr>
                        <tr><td> Sold apartments value : {{ sold_products_val }} PLN</td></tr>
                        <tr><td> Average sold apartments PLN\sqm : {{ average_sold_price_per_sqm }}</td></tr>
        </tbody>
    </table>
    <br>
    <table>
        <tbody>
        <th>Product id</th>
             <th>Area</th>
             <th>Floor</th>
             <th>Number of rooms</th>
             <th>Status</th>
             <th>Price</th>
             <th>Go to product details</th>
         {% for product in products_reserved %}

                    <tr>
                        <td> {{product.id}}</td> <td>{{product.area}}</td>
                        <td>{{product.floor}}</td><td>{{product.number_of_rooms}}</td><td> {{product.status}}</td>
                        <td> {{product.price}} PLN</td> <td> <a href="http://127.0.0.1:8000/showProduct/{{ product.id }}"> {{ product }}</a></td>
                    </tr>
                        {% endfor %}
                    <tr><td>Reserved apartments qty : {{ reserved_apartments_quantity }}</td></tr>
                    <tr><td> Reserved apartments share : {{ reserved_products_share }} of qty</td></tr>
                    <tr><td> Reserved apartments area : {{ reserved_apartments_area }}</td></tr>
                    <tr><td> Reserved apartments area share : {{ reserved_apartments_area_share }} of total area</td></tr>
                    <tr><td> Reserved apartments value : {{ reserved_products_val }} PLN </td></tr>
                    <tr><td> Average reserved apartments price\sqm : {{ average_reserved_price_per_sqm }}</td></tr>
        </tbody>

    </table>
    <table>
        <tbody>
    <br>

    <th>Product id</th>
             <th>Area</th>
             <th>Floor</th>
             <th>Number of rooms</th>
             <th>Status</th>
             <th>Price</th>
             <th>Go to product details</th>
                {% for product in products_available %}

                    <tr>
                        <td> {{product.id}}</td> <td>{{product.area}}</td>
                        <td>{{product.floor}}</td><td>{{product.number_of_rooms}}</td><td> {{product.status}}</td>
                        <td> {{product.price}} PLN</td> <td> <a href="http://127.0.0.1:8000/showProduct/{{ product.id }}"> {{ product }}</a></td>
                    </tr>
                        {% endfor %}
                    <tr><td> Available apartments qty : {{ available_apartments_quantity }}</td></tr>
                    <tr><td> Available apartments share : {{ available_products_share }} of qty</td></tr>
                    <tr><td> Available apartments area : {{ available_apartments_area }}</td></tr>
                    <tr><td> Available apartments area share : {{ available_apartments_area_share }} of total area</td></tr>
                    <tr><td> Available apartments value : {{ available_products_val }} PLN</tr></td>
                    <tr><td> Average available apartments price\sqm : {{ average_available_price_per_sqm }}</td></tr>
              </tbody>
        </table>
</form>
<br>
<br>

{% endblock %}
{% block second_action %}

<img src="{% static 'pie_chart.png' %}" alt="My image">






{% endblock %}
{% block info %}
{{ message }}
{% endblock %}



                        'total_apartments_val': total_apartments_val,
                        'sold_products_val': sold_products_area_val,
                        'reserved_products_val': reserved_products_val,
                        'available_products_val': available_products_val,
                        'average_total_price_per_sqm': average_total_price_per_sqm,
                        'average_sold_price_per_sqm' : average_sold_price_per_sqm,
                        'average_reserved_price_per_sqm' : average_reserved_price_per_sqm,
                        'average_available_price_per_sqm' : average_available_price_per_sqm,}






